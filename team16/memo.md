| ステップ       | 内容                   | 主な目的                                                           | 出力・成果                                   |
| ---------- | -------------------- | -------------------------------------------------------------- | --------------------------------------- |
| **Step 0** | 日本語フォント設定            | Matplotlibグラフの文字化け防止（IPAフォントを設定）                               | 日本語のラベルが読めるグラフ出力                        |
| **Step 1** | 必要ライブラリ読み込み          | pandas, numpy, statsmodelsなど分析ライブラリをインポート                      | 分析環境準備完了                                |
| **Step 2** | 模擬データ生成              | 顧客150名×3ヶ月分の時系列使用量をランダム生成。<br>昼型・夜型・平準型パターンを付与し、気温・市場価格・祝日も追加。 | `df`：時系列データ（顧客ID, 使用量, 気温, 市場価格, 時間帯など） |
| **Step 3** | クラスタリング（KMeans）      | 24時間の平均負荷曲線で顧客を自動分類。<br>昼間ピーク型／夜間ピーク型／平準型を自動判定。                | `pivot`：顧客ごとにクラスタと説明付き（顧客分類マスタ）         |
| **Step 4** | **価格感応度（市場価格弾力性）分析** | 各顧客の「市場価格→需要変化」関係をOLS回帰で推定。<br>価格上昇で使用量がどの程度減るか（価格弾力性）を算出。     | `coef_df`：顧客ごとの市場価格弾力性（b₁係数）            |
| **Step 5** | 昼夜別平均＋収益シミュレーション     | 昼・夜の平均使用量を計算し、料金プランA〜Cを当てて3ヶ月分の収益を試算。                          | `revenue_df`：プラン別想定収益（A〜C）              |
| **Step 6** | 統合データ作成              | クラスタ説明＋昼夜平均＋弾力性＋収益を統合した提案用表を作成。                                | `summary`：顧客単位の分析結果（提案データ）              |
| **Step 7** | 可視化（平均負荷曲線）          | 各クラスタ（昼間・夜間・平準）の平均使用パターンをグラフ表示。                                | 時刻別使用量の特徴グラフ                            |
| **Step 8** | クラスタ別平均収益比較          | 各クラスタでのプランA〜C平均収益を比較し、最適プラン傾向を把握。                              | `plan_summary`：クラスタ別最適料金傾向              |
